!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.hhConnect=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){module.exports=function(userConfig){if(!userConfig.target)return console.info("[hhConnect] No target window found!"),{on:function(){},emit:function(){},call:function(){},bind:function(){}};var config={target:userConfig.target,cbReady:userConfig.onReady||function(){},namespace:userConfig.namespace||"HH",permission:userConfig.permission||"*",instance:Math.random().toString(36).substr(2,9),messageID:0},cbs={event:{},method:{},message:{}},nextMessageID=function(){return config.instance+"-"+(config.messageID++ +1)},sendMessage=function(name,data,id){console.log("sendMessage",[name,data,id]),config.target.postMessage({namespace:config.namespace,id:id||nextMessageID(),name:name,data:data},config.permission)};return window.addEventListener("message",function(event){var request=event.data;if(request.namespace===config.namespace){if("__ready"==request.name)return"ping!"==request.data&&sendMessage("__ready","pong!"),void config.cbReady();cbs.method[request.name]&&cbs.method[request.name](request.data,function(error,data){sendMessage("_callback_"+request.name,{error:error,data:data},request.id)}),cbs.message[request.id]&&(cbs.message[request.id](request.data.error,request.data.data),delete cbs.message[request.id]),cbs.event[request.name]&&cbs.event[request.name](request.data),cbs.event["*"]&&request.name.indexOf("__event__")>-1&&cbs.event["*"](request.name.substring(9),request.data)}},!1),setTimeout(function(){sendMessage("__ready","ping!")},0),{on:function(eventName,eventCB){cbs.event["__event__"+eventName]=eventCB},emit:function(eventName,eventData){sendMessage("__event__"+eventName,eventData)},bind:function(methodName,methodFunction){cbs.method["_method_"+methodName]=methodFunction},call:function(methodName,methodParams,methodCB){var messageID=nextMessageID();methodCB&&(cbs.message[messageID]=methodCB),sendMessage("_method_"+methodName,methodParams,messageID)}}}},{}]},{},[1])(1)});
//# sourceMappingURL=./dist/hhConnect.min.map